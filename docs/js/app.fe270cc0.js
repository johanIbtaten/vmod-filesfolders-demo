(function(e){function t(t){for(var s,a,o=t[0],l=t[1],d=t[2],u=0,f=[];u<o.length;u++)a=o[u],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&f.push(i[a][0]),i[a]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);c&&c(t);while(f.length)f.shift()();return r.push.apply(r,d||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],s=!0,o=1;o<n.length;o++){var l=n[o];0!==i[l]&&(s=!1)}s&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var s={},i={app:0},r=[];function a(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=s,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(n,s,function(t){return e[t]}.bind(null,s));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/vmod-filesfolders-demo/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var c=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"070a":function(e,t,n){n("d3b7"),window.__=function(e){return e},window.app={ui:{confirm:function(e){return new Promise((function(t){var n=window.confirm(e);n&&t()}))},error:function(e){alert("Error !"+String(e))},success:function(){var e='<div class="toaster alert alert-success" role="alert" style="position: fixed; top: 0; left: 50%; margin-left: -50px;">\n          Success\n          </div>',t=document.createElement("div");t.innerHTML=e,document.body.appendChild(t),window.setTimeout((function(){t.parentNode.removeChild(t)}),2e3)},prompt:function(e,t){return new Promise((function(n){var s=window.prompt(e,t);s&&n(s)}))}}}},"1f96":function(e,t,n){"use strict";var s=n("5025"),i=n.n(s);i.a},"2d23":function(e,t,n){"use strict";var s=n("c31a"),i=n.n(s);i.a},"3bb4":function(e,t,n){"use strict";var s=n("4838"),i=n.n(s);i.a},4838:function(e,t,n){},5025:function(e,t,n){},5237:function(e,t,n){"use strict";var s=n("7763"),i=n.n(s);i.a},"541c":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("4de4"),n("c740"),n("caad"),n("c975"),n("d81d"),n("a434"),n("b0c0"),n("d3b7"),n("2532");var s=n("2909"),i=(n("96cf"),n("1da1")),r=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2b0e")),a=n("2f62");n("fb6a"),n("25f0");function o(){return Math.random().toString(16).slice(2)}function l(e){return new Promise((function(t){setTimeout((function(){console.log("ajax call add folder",{name:e}),t({success:!0,message:{folder:{id:o(),name:e,items:[]}}})}),500)}))}function d(e){return new Promise((function(t){console.log("ajax call folders",e.map((function(e){return e.id}))),t({success:!0,message:null})}))}function c(e){var t=e.toFolderId,n=e.fileId;return new Promise((function(e){setTimeout((function(){console.log("ajax call update folder content",{id:t,fileId:n}),e({success:!0,message:null})}),500)}))}function u(e){return new Promise((function(t){setTimeout((function(){console.log("ajax call rename folder",{id:e.id,name:e.name}),t({success:!0,message:null})}),500)}))}function f(e){return new Promise((function(t){setTimeout((function(){console.log("ajax call delete folder",e),t({success:!0,message:null})}),1e3)}))}function m(){return new Promise((function(e){var t={success:!0,message:{folders:[{id:0,name:"unclassified",items:[]},{id:1,name:"Folder 1 été",items:[]},{id:2,name:"Folder 2 hiver",items:[]},{id:3,name:"Folder 3 printemps",items:[]}],items:[{id:1,name:"File 1  ééé i fusdiu iosdu fisdufi usiodu fiu sdiofu sidufu sdf usdiof iosdf isdifuisd",status:"draft",created_at:"2020-05-11 12:00:00",date_scheduled:"2020-05-11 12:00:00",date_sent:"2020-05-11 12:00:00",recipient_count:"2020-05-11 12:00:00",opened_count:"2020-05-11 12:00:00",clicked_count:"2020-05-11 12:00:00",sending_list:[{name:"Liste clients",total_customer:5122}],routes:{edit:"/crm/edit",reporting:"/crm/reporting"}},{id:2,name:"File 2",status:"planned",created_at:"2020-05-11 12:00:00",date_scheduled:"2020-05-11 12:00:00",date_sent:"2020-05-11 12:00:00",recipient_count:"2020-05-11 12:00:00",opened_count:"2020-05-11 12:00:00",clicked_count:"2020-05-11 12:00:00",sending_list:[{name:"Liste de mes clients",total_customer:5122}],routes:{edit:"/crm/edit",reporting:"/crm/reporting"}},{id:3,name:"File 3 le printemps",status:"sent",created_at:"2020-05-11 12:00:00",date_scheduled:"2020-05-11 12:00:00",date_sent:"2020-05-11 12:00:00",recipient_count:"2020-05-11 12:00:00",opened_count:"2020-05-11 12:00:00",clicked_count:"2020-05-11 12:00:00",sending_list:[{name:"Liste de mes clients",total_customer:5122},{name:"Another list",total_customer:5122}],routes:{edit:"/crm/edit",reporting:"/crm/reporting"}},{id:4,name:"File 4 automne",status:"sent",created_at:"2020-05-11 12:00:00",date_scheduled:"2020-05-11 12:00:00",date_sent:"2020-05-11 12:00:00",recipient_count:"2020-05-11 12:00:00",opened_count:"2020-05-11 12:00:00",clicked_count:"2020-05-11 12:00:00",sending_list:[{name:"Liste de mes clients",total_customer:5122}],routes:{edit:"/crm/edit",reporting:"/crm/reporting"}}]}};e(t)}))}var p={load:m,createFolder:l,saveFoldersPosition:d,updateFolderContent:c,renameFolder:u,deleteFolder:f},h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{"frame-loading":e.loading}},[n("FolderMain",{attrs:{folders:e.folders,files:e.items,all:e.__("Tous les fichiers"),unclassified:e.__("Les fichiers non-classés"),searchFilesPlaceholder:e.__("Rechercher dans les fichiers")},scopedSlots:e._u([{key:"link",fn:function(){return[n("a",{staticClass:"btn btn-link",attrs:{href:"#"}},[e._v(" "+e._s(e.__("Stats du dossier"))+" "),n("i",{staticClass:"fas fa-chart-bar"})])]},proxy:!0},{key:"content",fn:function(t){var s=t.filteredFiles,i=t.selectedFolder;return e._l(e.statusList,(function(t,r){return n("div",{key:r},[n("h3",[e._v(e._s(t.title))]),n("FileList",{attrs:{list:e.campaignWithStatus(s,t.status),selectedFolder:i},scopedSlots:e._u([{key:"filesheader",fn:function(){return["draft"===t.status?[n("th",[e._v("Nom")]),n("th",[e._v("Status")]),n("th",[e._v("Ouverture")]),n("th",[e._v("Action")]),n("th",[e._v("Id")]),n("th",[e._v("Id")])]:e._e(),"sent"===t.status?[n("th",[e._v("Nom")]),n("th",[e._v("Destinataire")]),n("th",[e._v("Status")]),n("th",[e._v("Ouverture")]),n("th",[e._v("Action")]),n("th",[e._v("Id")])]:e._e(),"planned"===t.status?[n("th",[e._v("Nom")]),n("th",[e._v("Status")]),n("th",[e._v("Action")]),n("th",[e._v("Id")])]:e._e()]},proxy:!0},{key:"file",fn:function(s){var i=s.file;return["draft"===t.status?[n("td",[n("strong",[e._v(e._s(i.name))])]),n("td",[e._v(e._s(i.status))]),n("td",[e._v(e._s(e._f("formatDate")(i.opened_count)))]),n("td",[e._v(e._s(i.id))]),n("td",[e._v(e._s(i.id))]),n("td",[n("div",{staticClass:"ml-auto btn-container"},[n("div",{staticClass:"btn-group"},[n("button",{staticClass:"btn btn-secondary mr-1"},[n("i",{staticClass:"fas fa-ellipsis-h"})]),n("button",{staticClass:"btn btn-secondary"},[e._v(" "+e._s(e.__("modifier"))+" "),n("i",{staticClass:"fas fa-arrow-right ml-1"})])])])])]:e._e(),"sent"===t.status?[n("td",[n("strong",[e._v(e._s(i.name))])]),n("td",[e._v(e._s(i.sending_list[0].total_customer))]),n("td",[e._v(e._s(i.status))]),n("td",[e._v(e._s(e._f("formatDate")(i.opened_count)))]),n("td",[e._v(e._s(i.id))]),n("td",[n("div",{staticClass:"ml-auto btn-container"},[n("div",{staticClass:"btn-group"},[n("button",{staticClass:"btn btn-secondary mr-1"},[n("i",{staticClass:"fas fa-ellipsis-h"})]),n("button",{staticClass:"btn btn-secondary"},[e._v(" "+e._s(e.__("modifier"))+" "),n("i",{staticClass:"fas fa-arrow-right ml-1"})])])])])]:e._e(),"planned"===t.status?[n("td",[n("strong",[e._v(e._s(i.name))])]),n("td",[e._v(e._s(i.status))]),n("td",[e._v(e._s(i.id))]),n("td",[n("div",{staticClass:"ml-auto btn-container"},[n("div",{staticClass:"btn-group"},[n("button",{staticClass:"btn btn-secondary mr-1"},[n("i",{staticClass:"fas fa-ellipsis-h"})]),n("button",{staticClass:"btn btn-secondary"},[e._v(" "+e._s(e.__("rapport"))+" "),n("i",{staticClass:"fas fa-arrow-right ml-1"})])])])])]:e._e()]}}],null,!0)})],1)}))}}])})],1)},v=[],_=n("5530"),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.list.length>0?n("table",{staticClass:"table-custom table"},[n("thead",[n("tr",[n("th"),n("th",{directives:[{name:"show",rawName:"v-show",value:"all"===e.selectedFolder,expression:"selectedFolder === 'all'"}]},[e._v(e._s(e.__("Classée dans")))]),e._t("filesheader")],2)]),n("draggable",e._b({attrs:{tag:"tbody"},on:{start:e.onStart,end:e.onEnd},model:{value:e.dragFiles,callback:function(t){e.dragFiles=t},expression:"dragFiles"}},"draggable",e.dragFilesOptions,!1),e._l(e.list,(function(t){return n("tr",{key:t.id,ref:"file",refInFor:!0},[n("td",[n("button",{staticClass:"btn btn-link mr-1 drag-file",attrs:{"data-drag-file":""}},[n("i",{staticClass:"fas fa-bars"})])]),n("td",{directives:[{name:"show",rawName:"v-show",value:"all"===e.selectedFolder,expression:"selectedFolder === 'all'"}]},[e._v(" "+e._s(t.classifiedIn?t.classifiedIn:"Non-classée")+" ")]),e._t("file",null,{file:t})],2)})),0)],1):n("div",{staticClass:"pt-2 pb-3"},[e._v(e._s(e.__("Pas de campagnes")))])])},F=[],b=n("310e"),C=n.n(b),w={name:"FileList",props:["list","selectedFolder"],components:{draggable:C.a},computed:{dragFiles:{get:function(){return this.list},set:function(){}},dragFilesOptions:function(){return{animation:150,group:{name:"files",put:!1,pull:!0},sort:!1,revertOnSpill:!0,onSpill:function(e){e.item},handle:"[data-drag-file]",chosenClass:"chosen",dragClass:"drag",ghostClass:"ghost",forceFallback:!0}}},methods:{onStart:function(){this.$root.$emit("start-drag-file")},onEnd:function(){this.$root.$emit("end-drag-file")}}},x=w,k=(n("5237"),n("2877")),O=Object(k["a"])(x,g,F,!1,null,null,null),$=O.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container mt-3",class:{"drag-file":e.isDragFile}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-3"},[n("FolderList",{attrs:{folders:e.folders,all:e.all,unclassified:e.unclassified,allCount:e.files.length,unclassifiedCount:e.unclassifiedCount,selectedFolder:e.selectedFolder}})],1),n("div",{staticClass:"col-md-9"},[n("div",[n("div",{staticClass:"text-center"},[e.isCog?n("div",{staticClass:"cog position-absolute d-flex flex-column align-items-end"},[n("button",{staticClass:"btn btn-outline-secondary",on:{click:function(t){e.isCogOpen=!e.isCogOpen}}},[n("i",{staticClass:"fas fa-cog"})]),e.isCogOpen?n("div",{staticClass:"d-flex flex-column align-items-strech"},[n("button",{staticClass:"btn btn-secondary",on:{click:e.renameFolder}},[n("i",{staticClass:"fas fa-pen pr-2"}),e._v(" "+e._s(e.__("Renommer"))+" ")]),n("button",{staticClass:"btn btn-outline-danger pr-2",on:{click:e.deleteFolder}},[n("i",{staticClass:"fas fa-trash pr-2"}),e._v(" "+e._s(e.__("Supprimer"))+" ")])]):e._e()]):e._e(),n("h4",[e._v(e._s(e.folderName))])]),n("div",{staticClass:"text-center mb-3"},[e._t("link")],2),n("div",{staticClass:"mb-4"},[n("label",{staticClass:"form-control form-control-search"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],attrs:{type:"text",placeholder:e.searchFilesPlaceholder},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}}),n("i",{staticClass:"fas fa-search"})])]),e._t("content",null,{filteredFiles:e.filteredSearchFiles,selectedFolder:e.selectedFolder})],2)])])])},j=[],P=(n("ac1f"),n("466d"),n("841c"),n("2ef0")),S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"d-flex mb-2 align-items-center"},[n("h4",{staticClass:"box-title"},[e._v(e._s(e.__("Dossiers")))]),n("button",{staticClass:"btn btn-link ml-auto",on:{click:e.createFolder}},[n("i",{staticClass:"fas fa-folder-plus"})])]),n("div",[n("label",{staticClass:"form-control form-control-search"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],attrs:{type:"text",placeholder:e.__("Rechercher")},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}}),n("i",{staticClass:"fas fa-search"})])]),n("div",{on:{click:function(t){return t.preventDefault(),e.handleFixedFolderClick("all")}}},[n("FolderItemLink",{attrs:{all:e.all,selectedFolder:e.selectedFolder,allCount:e.allCount}})],1),e.folders.length>1?n("draggable",e._b({attrs:{draggable:".js-is-draggable"},model:{value:e.filteredFolder,callback:function(t){e.filteredFolder=t},expression:"filteredFolder"}},"draggable",e.dragFoldersOptions,!1),e._l(e.filteredFolder,(function(t){return n("FolderItem",{key:t.id,attrs:{folder:t,selectedFolder:e.selectedFolder,unclassified:e.unclassified,unclassifiedCount:e.unclassifiedCount}})})),1):e._e(),e.folders.length<=1?n("div",{staticClass:"c_no_folder p-4 text-center text-muted font-weight-bold"},[n("i",{staticClass:"fa fa-folder fa-3x pb-3"}),n("p",[e._v("Vous n'avez pas encore de dossier")]),n("p",[e._v(" Les dossiers peuvent être utilisés pour organiser les campagnes et avoir des statistiques regroupées. ")])]):e._e(),n("div",{staticClass:"mt-4"},[n("button",{staticClass:"btn btn-lightblue2 btn-fa-left",on:{click:e.createFolder}},[n("i",{staticClass:"fas fa-folder-plus"}),e._v(" "+e._s(e.__("Nouveau dossier"))+" ")])])],1)},L=[],I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-folder-list",class:{"js-is-draggable":e.isDraggable},on:{click:e.handleFolderClick}},[n("draggable",e._b({staticClass:"dropZoneFile",class:{active:e.isActive},on:{change:e.changeFolder},model:{value:e.foldercontent,callback:function(t){e.foldercontent=t},expression:"foldercontent"}},"draggable",e.dropFileZoneOptions,!1)),n("div",[n("FolderItemLink",{attrs:{folder:e.folder,selectedFolder:e.selectedFolder,unclassified:e.unclassified,unclassifiedCount:e.unclassifiedCount}})],1)],1)},D=[],R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-folder-item-link btn d-flex align-items-center border-bottom py-3 text-left pl-0",class:{active:e.isActive}},[e.isActive?n("i",{staticClass:"far fa-folder-open fa-fw btn btn-link"}):n("i",{staticClass:"far fa-folder fa-fw btn btn-link"}),n("span",{staticClass:"pl-3 pr-3"},[e._v(e._s(e.folderName))]),n("span",{staticClass:"badge badge-secondary ml-auto"},[e._v(e._s(e.folderCount))]),e.folder&&"unclassified"!==e.folder.name?n("i",{staticClass:"fas fa-arrows-alt-v btn btn-link ml-2",attrs:{"data-drag-folder":""}}):e._e()])},E=[],N={name:"FolderItemLink",props:["folder","selectedFolder","all","unclassified","allCount","unclassifiedCount"],computed:{isActive:function(){if(this.selectedFolder){if("all"===this.selectedFolder&&this.allCount)return!0;if(this.folder)return this.selectedFolder.id===this.folder.id}return null},folderName:function(){return this.all?this.all:this.folder?"unclassified"===this.folder.name?this.unclassified:this.folder.name:null},folderCount:function(){return this.allCount?this.allCount:this.folder?this.unclassified&&"unclassified"===this.folder.name?this.unclassifiedCount:this.folder.items.length:null}}},T=N,A=(n("1f96"),Object(k["a"])(T,R,E,!1,null,"14c24f5a",null)),M=A.exports,z={name:"FolderItem",props:["folder","selectedFolder","unclassified","unclassifiedCount"],components:{draggable:C.a,FolderItemLink:M},data:function(){return{foldercontent:[],draggable:!0}},computed:{dropFileZoneOptions:function(){return{animation:150,group:{name:"files",put:["files"]},forceFallback:!0}},isActive:function(){return this.selectedFolder.id===this.folder.id},isDraggable:function(){return"unclassified"!==this.folder.name}},methods:{handleFolderClick:function(){this.$root.$emit("get-folder-content",this.folder)},changeFolder:function(e){if(e.added){var t={toFolder:this.folder,fileId:e.added.element.id,selectedFolder:this.selectedFolder};this.$root.$emit("file-dropped",t)}}}},Z=z,G=(n("5e5a"),Object(k["a"])(Z,I,D,!1,null,"35689d94",null)),J=G.exports,U={name:"FolderListing",props:["folders","all","unclassified","selectedFolder","unclassifiedCount","allCount"],components:{FolderItem:J,FolderItemLink:M,draggable:C.a},data:function(){return{search:""}},computed:{filteredFolder:{get:function(){var e=this;return this.folders.filter((function(t){return"unclassified"===t.name||Object(P["deburr"])(t.name.toLowerCase()).match(Object(P["deburr"])(e.search.toLowerCase()))}))},set:function(e){this.$root.$emit("folder-move",e)}},dragFoldersOptions:function(){return{animation:150,group:{name:"folders",put:!1},handle:"[data-drag-folder]"}}},methods:{createFolder:function(){var e=this;window.app.ui.prompt(this.__("Ajouter un nouveau dossier")).then((function(t){t&&e.$root.$emit("create-folder",t)}))},handleFixedFolderClick:function(e){this.$root.$emit("fixed-folder-click",e)}}},V=U,W=(n("3bb4"),Object(k["a"])(V,S,L,!1,null,"5acd7514",null)),q=W.exports,H={name:"Folder",props:["folders","files","all","unclassified","searchFilesPlaceholder"],data:function(){return{search:"",selectedFolder:"all",isDragFile:!1,isCogOpen:!1}},components:{FolderList:q},computed:{unclassifiedFiles:function(){var e=this,t=[];return t=this.files.filter((function(t){var n=!1;return e.folders.map((function(e){e.items.includes(t.id)&&(n=!0)})),!n})),t},unclassifiedCount:function(){return this.unclassifiedFiles.length},folderName:function(){return"all"===this.selectedFolder?this.all:"unclassified"===this.selectedFolder.name?this.unclassified:this.selectedFolder.name},filteredFiles:function(){var e=this,t=this.files;if(this.selectedFolder&&"all"===this.selectedFolder&&t.map((function(t){var n=!1;return e.folders.map((function(e){e.items.includes(t.id)&&(n=!0,t["classifiedIn"]=e.name)})),n||(t["classifiedIn"]=""),t})),this.selectedFolder&&"all"!==this.selectedFolder){if("unclassified"===this.selectedFolder.name)return this.unclassifiedFiles;t=t.filter((function(t){return e.selectedFolder.items.includes(t.id)}))}return t},filteredSearchFiles:function(){var e=this,t=this.filteredFiles;return this.search&&(t=this.filteredFiles.filter((function(t){return Object(P["deburr"])(t.name.toLowerCase()).match(Object(P["deburr"])(e.search.toLowerCase()))}))),t},isCog:function(){return!("all"===this.selectedFolder||"unclassified"===this.selectedFolder.name)}},methods:{renameFolder:function(){var e=this;window.app.ui.prompt(this.__("Renommer le dossier"),this.selectedFolder.name).then((function(t){t&&e.$root.$emit("rename-folder",{id:e.selectedFolder.id,name:t})}))},deleteFolder:function(){var e=this;window.app.ui.confirm(this.__('Voulez-vous vraiment supprimer ce dossier ? Un fois supprimé, vous pourrez retrouver les campagnes de ce dossier dans "Toutes les campagnes" et "Les campagnes non-classées"')).then((function(){e.$root.$emit("delete-folder",e.selectedFolder.id),e.selectedFolder="all"}))},handleGetFolderContent:function(e){this.selectedFolder=e,this.isCogOpen=!1},handleFixedFolderClick:function(e){"all"===e&&(this.selectedFolder=e)},handleStartDragFile:function(){this.isDragFile=!0},handleEndDragFile:function(){this.isDragFile=!1}},created:function(){this.$root.$on("get-folder-content",this.handleGetFolderContent),this.$root.$on("fixed-folder-click",this.handleFixedFolderClick),this.$root.$on("start-drag-file",this.handleStartDragFile),this.$root.$on("end-drag-file",this.handleEndDragFile)}},B=H,K=(n("66a9"),Object(k["a"])(B,y,j,!1,null,"b661a4b4",null)),Q=K.exports,X={name:"CampaignFolder",components:{FileList:$,FolderMain:Q},data:function(){return{loading:!1,statusList:[{status:"draft",title:this.__("En préparation")},{status:"sent",title:this.__("Envoyé")},{status:"planned",title:this.__("Planifié")}]}},computed:Object(_["a"])({},Object(a["b"])(["folders","items"])),methods:{campaignWithStatus:function(e,t){return e.filter((function(e){return e.status===t}))},handleCreateFolder:function(e){var t=this;this.loading=!0,this.$store.dispatch("createFolder",e).then((function(){t.loading=!1}))},handleRenameFolder:function(e){var t=this;this.loading=!0,this.$store.dispatch("renameFolder",e).then((function(){t.loading=!1}))},handleDeleteFolder:function(e){var t=this;this.loading=!0,this.$store.dispatch("deleteFolder",e).then((function(){t.loading=!1}))},handleFolderMove:function(e){this.$store.dispatch("updateFolderOrder",e).then((function(){}))},handleFileDropped:function(e){var t=this;this.loading=!0,this.$store.dispatch("updateFolderContent",e).then((function(){t.loading=!1}))}},created:function(){this.$root.$on("create-folder",this.handleCreateFolder),this.$root.$on("rename-folder",this.handleRenameFolder),this.$root.$on("delete-folder",this.handleDeleteFolder),this.$root.$on("folder-move",this.handleFolderMove),this.$root.$on("file-dropped",this.handleFileDropped)}},Y=X,ee=(n("2d23"),Object(k["a"])(Y,h,v,!1,null,"6c91da4a",null)),te=ee.exports;n("070a");r["a"].use(a["a"]),r["a"].mixin({methods:{__:function(e){return e}}}),r["a"].config.productionTip=!1,r["a"].filter("formatDate",(function(e){if(e){var t=new Date(e),n={year:"numeric",month:"long",day:"numeric"};return t.toLocaleDateString("fr-FR",n)}}));var ne=se();function se(){var e={folders:[],items:[],loading:{createFolder:!1,el:null}},t={getUnclassified:function(e){var t=[];return t=e.items.filter((function(t){var n=!1;return e.folders.map((function(e){e.items.includes(t.id)&&(n=!0)})),!n})),t}},n={folders:function(e,t){e.folders=t},items:function(e,t){e.items=t},add_folder:function(e,t){e.folders.splice(1,0,t)},delete_folder:function(e,t){e.folders.splice(e.folders.findIndex((function(e){return e.id===t})),1)}},r={load:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.abrupt("return",p.load().then((function(e){n("folders",e.message.folders),n("items",e.message.items)})));case 2:case"end":return t.stop()}}),t)})))()},createFolder:Object(P["debounce"])(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.commit,e.abrupt("return",p.createFolder(n).then((function(e){if(e.success)return s("add_folder",e.message.folder),window.app.ui.success(),Promise.resolve();window.app.ui.error(e.message)})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),1e3,{leading:!0}),updateFolderOrder:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,n.abrupt("return",p.saveFoldersPosition(t).then((function(e){if(e.success)return s("folders",t),window.app.ui.success(),Promise.resolve();window.app.ui.error(e.message)})));case 2:case"end":return n.stop()}}),n)})))()},updateFolderContent:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,r,a,o,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.state,r=e.commit,a=t.toFolder,o=t.fileId,l=t.selectedFolder,n.abrupt("return",p.updateFolderContent({toFolderId:a.id,fileId:o}).then((function(e){if(e.success){var t=i.folders.map((function(e){return e.id===a.id&&a!==l.id&&"unclassified"!==a.name?e.items.includes(o)||e.items.push(o):e.items.includes(o)&&e.items.splice(e.items.indexOf(o),1),"unclassified"===a.name&&e.items.includes(o)&&e.items.splice(e.items.indexOf(o),1),e}));return r("folders",t),r("items",Object(s["a"])(i.items)),window.app.ui.success(),Promise.resolve()}window.app.ui.error(e.message)})));case 3:case"end":return n.stop()}}),n)})))()},renameFolder:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.state,i=e.commit,n.abrupt("return",p.renameFolder(t).then((function(e){if(e.success){var n=s.folders.map((function(e){return e.id===t.id&&(e.name=t.name),e}));return i("folders",n),window.app.ui.success(),Promise.resolve()}window.app.ui.error(e.message)})));case 2:case"end":return n.stop()}}),n)})))()},deleteFolder:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,n.abrupt("return",p.deleteFolder(t).then((function(e){if(e.success)return s("delete_folder",t),window.app.ui.success(),Promise.resolve();window.app.ui.error(e.message)})));case 2:case"end":return n.stop()}}),n)})))()}};return new a["a"].Store({state:e,getters:t,mutations:n,actions:r})}new r["a"]({store:ne,render:function(e){return e(te)}}).$mount("#app"),ne.dispatch("load")},"5e5a":function(e,t,n){"use strict";var s=n("70dd"),i=n.n(s);i.a},"66a9":function(e,t,n){"use strict";var s=n("541c"),i=n.n(s);i.a},"70dd":function(e,t,n){},7763:function(e,t,n){},c31a:function(e,t,n){}});
//# sourceMappingURL=app.fe270cc0.js.map